"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[26335],{9187:(t,e,o)=>{o.d(e,{Z:()=>i});const i=o.p+"assets/images/Microsoft-authorization-code-flow-cddfa49e121f0aa127c2e704cbbca4c6.svg"},66162:(t,e,o)=>{o.r(e),o.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>h});var i=o(24246),n=o(71670);const r={description:"Microsoft identity platform and OAuth 2.0 authorization code flow"},c="Auth with Microsoft code flow",s={id:"rocketchat/rocketchat-microsoft-oauth",title:"Auth with Microsoft code flow",description:"Microsoft identity platform and OAuth 2.0 authorization code flow",source:"@site/docs/rocketchat/rocketchat-microsoft-oauth.mdx",sourceDirName:"rocketchat",slug:"/rocketchat/rocketchat-microsoft-oauth",permalink:"/docs/next/rocketchat/rocketchat-microsoft-oauth",draft:!1,unlisted:!1,editUrl:"https://github.com/vulnsystem/vulnsystem.github.io/edit/main/website/docs/rocketchat/rocketchat-microsoft-oauth.mdx",tags:[],version:"current",lastUpdatedBy:"Gitcoins",lastUpdatedAt:1719746099,formattedLastUpdatedAt:"Jun 30, 2024",frontMatter:{description:"Microsoft identity platform and OAuth 2.0 authorization code flow"},sidebar:"woofwoof",previous:{title:"RocketChat Oauth flow",permalink:"/docs/next/rocketchat/rocketchat-oauth-process"},next:{title:"Debugging with Ngrok",permalink:"/docs/next/rocketchat/debugging-with-ngrok"}},a={},h=[{value:"Microsoft OAuth Protocol details",id:"microsoft-oauth-protocol-details",level:2},{value:"Microsoft Oauth Prerequisites",id:"microsoft-oauth-prerequisites",level:2},{value:"Create Custom O365 OAuth in RocketChat",id:"create-custom-o365-oauth-in-rocketchat",level:2}];function l(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,n.a)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"auth-with-microsoft-code-flow",children:"Auth with Microsoft code flow"}),"\n",(0,i.jsxs)(e.admonition,{title:"Useful links",type:"info",children:[(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749",children:(0,i.jsx)(e.code,{children:"The OAuth 2.0 Authorization Framework"})})}),(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow",children:(0,i.jsx)(e.code,{children:"Microsoft identity platform and OAuth 2.0 authorization code flow"})})})]}),"\n",(0,i.jsx)(e.h2,{id:"microsoft-oauth-protocol-details",children:"Microsoft OAuth Protocol details"}),"\n",(0,i.jsxs)(e.p,{children:["The OAuth 2.0 authorization code flow is described in section ",(0,i.jsx)(e.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-4.1",children:(0,i.jsx)(e.code,{children:"4.1 of the OAuth 2.0 specification"})}),". Apps using the OAuth 2.0 authorization code flow acquire an access_token to include in requests to resources protected by the Microsoft identity platform (typically APIs). Apps can also request new ID and access tokens for previously authenticated entities by using a refresh mechanism."]}),"\n",(0,i.jsx)("p",{align:"center",children:(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:o(9187).Z+"",width:"790",height:"495"})})}),"\n",(0,i.jsx)(e.h2,{id:"microsoft-oauth-prerequisites",children:"Microsoft Oauth Prerequisites"}),"\n",(0,i.jsx)(e.p,{children:"Apart from the OAuth methods that Rocket.Chat provides for user authentication, you can also choose to set up a custom OAuth method."}),"\n",(0,i.jsx)(e.p,{children:"This guide shows how you can set up a custom OAuth integration between Microsoft accounts and Rocket.Chat. This is achieved with the use of Microsoft Entra ID (formerly called Azure Active Directory), which is an identity service by Microsoft that provides single sign-on and other authentication methods. You can also define conditional access policies and role-based permissions."}),"\n",(0,i.jsx)(e.p,{children:"Prerequisites:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"An account on the Azure portal."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"An Azure Active Directory app."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"An application ID and client secret."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"If you don't have an app, log in to the Azure Portal and navigate to the Microsoft Entra ID tab."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Create a new App Registration."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Fill in the details. You will get the redirect URI from your Rocker.Chat workspace when you Create Custom O365 OAuth."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"After registering your new app, take note of Application (client) ID. It will be needed to configure the integration later."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"On your new app's page, go to the Certificates and Secret tab to create a New client secret."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"create-custom-o365-oauth-in-rocketchat",children:"Create Custom O365 OAuth in RocketChat"}),"\n",(0,i.jsx)(e.p,{children:"To create a custom authentication method in your Rocket.Chat workspace:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Navigate to Administration > Workspace > Settings > OAuth."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"Click on Custom OAuth and set the new OAuth integration name."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"After creating the new integration, you are given the Callback URL. Provide this as the redirect URI when you are creating your Azure app."}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"You will also need to fill in other configuration fields."}),"\n"]}),"\n"]})]})}function d(t={}){const{wrapper:e}={...(0,n.a)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(l,{...t})}):l(t)}},71670:(t,e,o)=>{o.d(e,{Z:()=>s,a:()=>c});var i=o(27378);const n={},r=i.createContext(n);function c(t){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:c(t.components),i.createElement(r.Provider,{value:e},t.children)}}}]);